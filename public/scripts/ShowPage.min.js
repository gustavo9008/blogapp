const deleteCommentBtn=document.querySelectorAll(".delete-comment"),deleteReplyBtn=document.querySelectorAll(".delete-reply-comment"),form=document.querySelector("#submit-comment-form"),formReply=document.querySelectorAll(".submit-reply-form"),replyBtn=document.querySelectorAll(".reply-button"),saveCommentBtn=document.querySelectorAll(".save-comment-btn"),updateReplyBtn=document.querySelectorAll(".update-reply-btn"),c_textContainer=document.getElementById("comment-submit-container"),textarea=document.getElementById("comment-textarea"),hiddenBtn=document.getElementById("hidden-btn");function sendComment(url){let text,comment={text:form[0].value};axios.post(url,{comment:comment}).then((function(response){console.log(response),window.location.reload()})).catch((function(error){console.log(error)}))}textarea.addEventListener("focus",()=>{hiddenBtn.style.display="block",c_textContainer.classList.add("comment-submit-container")}),hiddenBtn.addEventListener("click",(function(){if(""===form[0].value)displayError(),console.log("no data was given");else{console.log("btn was clicked");const submitCommentUrl=this.getAttribute("data-url");sendComment(submitCommentUrl)}}));for(let i=0;i<replyBtn.length;i++)replyBtn[i].addEventListener("click",(function(){const replyForm=this.parentNode.querySelector("#reply-textarea").value;if(""===replyForm)displayError(),console.log("no data was given");else{const submitReplyUrl=this.getAttribute("data-url");sendReply(submitReplyUrl,replyForm)}}));function sendReply(url,replyData){let commentReply=replyData;console.log(commentReply),axios.post(url,{commentReply:commentReply}).then((function(response){console.log(response),window.location.reload()})).catch((function(error){console.log(error)}))}for(let i=0;i<saveCommentBtn.length;i++)saveCommentBtn[i].addEventListener("click",(function(){const updatedCommentForm=this.parentNode.parentNode.querySelector("#saveCommentBtn").value;if(""===updatedCommentForm)displayError(),console.log("no data was given");else{const updateCommentAction=this.getAttribute("data-action");console.log(updatedCommentForm),console.log(updateCommentAction),sendUpdateComment(updateCommentAction,updatedCommentForm)}}));function sendUpdateComment(url,commentData){let comment={text:commentData};axios.put(url,{comment:comment}).then((function(response){console.log(response),window.location.reload()})).catch((function(error){console.log(error)}))}for(let i=0;i<updateReplyBtn.length;i++)updateReplyBtn[i].addEventListener("click",(function(){const updatedReplyForm=this.parentNode.parentNode.querySelector("#update-reply-comment").value;if(""===updatedReplyForm)displayError(),console.log("no data was given");else{const updateReplyCommentAction=this.getAttribute("data-action");sendUpdateReply(updateReplyCommentAction,updatedReplyForm)}}));function sendUpdateReply(url,commentData){let comment={text:commentData};axios.put(url,{comment:comment}).then((function(response){console.log(response),window.location.reload()})).catch((function(error){console.log(error)}))}for(let i=0;i<deleteCommentBtn.length;i++)deleteCommentBtn[i].addEventListener("click",(function(){let commentDelete=this.getAttribute("data-href"),parent;this.parentNode.parentNode.parentNode.parentNode.parentNode.remove(),console.log(commentDelete),axios.delete(commentDelete,{}).then((function(response){response&&(console.log(response),successAction(),window.location.reload())})).catch((function(error){console.log(error)}))}));for(let i=0;i<deleteReplyBtn.length;i++)deleteReplyBtn[i].addEventListener("click",(function(){let commentDelete=this.getAttribute("data-href"),parent=this.parentNode.parentNode.parentNode.parentNode.parentNode;console.log(commentDelete),axios.put(commentDelete,{}).then((function(response){response&&(console.log(response),successAction(),parent.remove(),window.location.reload())})).catch((function(error){console.log(error)}))}));